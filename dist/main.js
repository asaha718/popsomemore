!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function i(t,n,s,o,l){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:68;e(this,i),this.x=t,this.y=n,this.c_width=480,this.c_height=620,this.r=r,this.type=s,this.speed=2,this.speedX=o,this.speedY=l,this.maxSpeed=1.3,this.moveLeft=!1,this.moveUp=!1,this.gameOver=!1}var n,s;return n=i,(s=[{key:"drawBalloon",value:function(e){e.beginPath(),e.arc(this.x,this.y,this.r,0,2*Math.PI),e.fillStyle="#c47de8",e.fill(),e.closePath()}},{key:"moveBalloon",value:function(){(this.x+this.r>=this.c_width||this.x<=this.r)&&(this.speedX=-1*this.speedX),this.y<=this.r?this.speedY=-1*this.speedY:this.y+this.r>=this.c_height&&(this.gameOver=!0),"firstBalloon"==this.type?(this.x+=this.speedX,this.y+=this.speedY):"mini-balloon-left"==this.type?(this.x-=this.speedX,this.y+=this.speedY):(this.x+=this.speedX,this.y+=this.speedY)}},{key:"animate",value:function(e){this.moveBalloon(),this.drawBalloon(e)}}])&&t(n.prototype,s),i}();function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dimensions=t,this.iconX=(this.dimensions.width-15)/2,this.iconY=this.dimensions.height-45,this.rightPressed=!1,this.leftPressed=!1}var t,i;return t=e,(i=[{key:"drawPlayer",value:function(e){e.beginPath(),e.fillRect(this.iconX,this.iconY,15,45),e.fillStyle="#0095DD",e.fill(),e.closePath(),this.rightPressed?(this.iconX+=7,this.iconX+15>this.dimensions.width&&(this.iconX=this.dimensions.width-15)):this.leftPressed&&(this.iconX-=7,this.iconX<0&&(this.iconX=0))}},{key:"movePlayer",value:function(e){"Right"===e||"ArrowRight"===e?this.rightPressed=!0:"Left"!==e&&"ArrowLeft"!==e||(this.leftPressed=!0)}},{key:"stopPlayer",value:function(){this.rightPressed=!1,this.leftPressed=!1}},{key:"animate",value:function(e){this.drawPlayer(e)}}])&&n(t.prototype,i),e}();function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pos_x=t,this.pos_y=i,this.fired=!1,this.type=n}var t,i;return t=e,(i=[{key:"drawProjectile",value:function(e,t,i){e.strokeStyle="#000",e.beginPath(),e.arc(this.pos_x,this.pos_y,2,0,2*Math.PI),e.lineWidth=1,e.strokeStyle="red",e.stroke()}},{key:"moveProjectile",value:function(){this.pos_y-=5}},{key:"animate",value:function(e,t,i){this.drawProjectile(e,t,i)}}])&&o(t.prototype,i),e}();function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=[],h=[],c=0,u=0,f=!1,y=!1,d=!1,p=document.querySelector(".left"),v=document.querySelector(".right"),m=document.querySelector(".space");function w(e,t){return Math.floor(Math.random()*(t-e))+e}new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t.getContext("2d"),this.dimensions={width:t.width,height:t.height},this.firstBalloonSpawnX=this.dimensions.width/2,this.firstBalloonSpawnY=80,this.player=new s(this.dimensions),this.balloons=h.push(new i(this.firstBalloonSpawnX,this.firstBalloonSpawnY,"firstBalloon",w(.5,.9),w(.5,.9))),this.projectiles=a.push(new l(this.player.iconX,this.player.iconY,"firstProjectile")),this.registerEvents(),this.spawnBalloon=!1,this.score=0,this.level=1}var t,n;return t=e,(n=[{key:"registerEvents",value:function(){document.addEventListener("keydown",this.keyDownHandler.bind(this),!1),document.addEventListener("keyup",this.keyUpHandler.bind(this),!1)}},{key:"keyDownHandler",value:function(e){"Right"===e.key||"ArrowRight"===e.key?(this.player.movePlayer(e.key),v.style.backgroundColor="#bea0da"):"Left"===e.key||"ArrowLeft"===e.key?(this.player.movePlayer(e.key),p.style.backgroundColor="#bea0da"):"Space"===e.code&&(y=!0,m.style.backgroundColor="#bea0da")}},{key:"keyUpHandler",value:function(e){"Right"===e.key||"ArrowRight"===e.key?(this.player.stopPlayer(),v.style.backgroundColor="blueviolet"):"Left"===e.key||"ArrowLeft"===e.key?(this.player.stopPlayer(),p.style.backgroundColor="blueviolet"):"Space"===e.code&&(y=!1,m.style.backgroundColor="blueviolet")}},{key:"collisionDetection",value:function(e,t,i,n,s,o){var l=t-e,r=n-i;return Math.sqrt(l*l+r*r)<s+o&&(this.score++,c=e,u=i,f&&(this.doubleBalloon(),f=!1),!0)}},{key:"doubleBalloon",value:function(){h.push(new i(c,u,"mini-balloon-right",w(.5,.9),w(.5,.9),34)),h.push(new i(c,u,"mini-balloon-left",w(.5,.9),w(.5,.9),34))}},{key:"drawScore",value:function(){this.ctx.font="16px Arial",this.ctx.fillStyle="#0095DD",this.ctx.fillText("Score: "+this.score,8,20)}},{key:"drawLevel",value:function(){this.ctx.font="16px Arial",this.ctx.fillStyle="#0095DD",this.ctx.fillText("Level: "+this.level,this.dimensions.width-100,20)}},{key:"animate",value:function(){var e=this;d&&(alert("GAME OVER"),document.location.reload(),clearInterval(interval)),this.ctx.clearRect(0,0,this.dimensions.width,this.dimensions.height),0!=a.length&&0!=h.length&&h.forEach((function(t,i,n){a.forEach((function(s,o,l){t.animate(e.ctx),"firstBalloon"==t.type&&(f=!0),"mini-balloon-left"!=t.type&&"mini-balloon-right"!=t.type||(f=!1),e.collisionDetection(t.x,s.pos_x,t.y,s.pos_y,t.r,2)&&(n.splice(i,1),i--,l.splice(o,1),o--)}))})),0==h.length&&(d||this.level++,2==this.level&&this.AddNewBalloons(2),3==this.level&&this.AddNewBalloons(3)),h.forEach((function(e){1==e.gameOver&&(d=!0)})),y&&(a.push(new l(this.player.iconX,this.player.iconY,"missile")),y=!1),0!=a.length&&a.forEach((function(t){"missile"==t.type&&(t.moveProjectile(),t.animate(e.ctx,e.player.x,e.player.y))})),this.drawScore(),this.drawLevel(),this.player.animate(this.ctx),requestAnimationFrame(this.animate.bind(this))}},{key:"AddNewBalloons",value:function(e){for(var t=0;t<e;t++){var n=w(0,this.dimensions.width);h.push(new i(n,this.firstBalloonSpawnY,"firstBalloon",w(.5,.9),w(.5,.9)))}}}])&&r(t.prototype,n),e}())(document.getElementById("balloon-game")).animate()}();
//# sourceMappingURL=main.js.map